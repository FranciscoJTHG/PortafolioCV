---
// ThemeToggleButton.astro - Versi√≥n simplificada de alternancia
---

<button
  id="theme-toggle"
  aria-label="Cambiar tema"
  class="btn btn-md btn-ghost"
>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
  >
    <circle class="hidden dark:block" cx="12" cy="12" r="4"></circle>
    <path
      class="hidden dark:block"
      d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32 1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"
    ></path>
  </svg>
</button>

<script transition:persist>

  function toggleTheme() {
    const currentTheme = document.documentElement.getAttribute("data-theme") || "lofi";
    const newTheme = currentTheme === "lofi" ? "night" : "lofi";

    document.documentElement.setAttribute("data-theme", newTheme);
    localStorage.setItem("theme", newTheme);
  }

  function setupThemeToggle() {
    const themeToggle = document.getElementById("theme-toggle");

    if (themeToggle) {
      themeToggle.removeEventListener("click", toggleTheme);
      themeToggle.addEventListener("click", toggleTheme);
    }
  }

  document.addEventListener("DOMContentLoaded", setupThemeToggle);
  document.addEventListener("astro:page-load", setupThemeToggle);
</script>
